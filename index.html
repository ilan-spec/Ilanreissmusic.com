<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ilan Reiss Music Player</title>
    
    <!-- Font Awesome for the music icon --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <!-- All CSS is now inside the HTML file --><style>
        /* Import a clean font */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', system-ui, sans-serif;
            color: #333;
            /* New light blue sky background */
            background: linear-gradient(to bottom, #87CEEB 0%, #E0F8FF 100%);
            overflow: hidden; /* Prevents scrollbars from moving clouds */
            height: 100vh;
        }

        /* --- Animated Cloud Background --- */
        
        #cloud-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        /* This wrapper handles the left-to-right movement */
        .cloud-wrapper {
            position: absolute;
            top: 5%;
            left: 0;
            width: 200px;
            height: 100px;
            animation: moveClouds 25s linear infinite;
        }

        /* This inner cloud is what we animate with JavaScript */
        .cloud {
            position: absolute;
            width: 100%;
            height: 100%;
            background: #ffffff;
            border-radius: 50%; /* Makes the base oval */
            
            /* This shadow is what JavaScript will control */
            box-shadow: 0 0 30px 15px rgba(255, 255, 255, 0.8);
            
            /* Smooth transitions for scaling and shadow */
            transition: all 0.2s ease-out;
        }

        /* Creates the "puffy" look using pseudo-elements */
        .cloud::before, .cloud::after {
            content: '';
            position: absolute;
            background: #ffffff;
            border-radius: 50%;
        }

        .cloud::before {
            width: 100px;
            height: 100px;
            top: -50px;
            left: 30px;
        }

        .cloud::after {
            width: 140px;
            height: 140px;
            top: -70px;
            right: 0px;
        }

        /* Create variations for a more natural sky */
        .cloud-wrapper.cloud-2 {
            top: 25%;
            transform: scale(0.8);
            animation-duration: 35s;
            animation-delay: -5s;
        }
        
        .cloud-wrapper.cloud-3 {
            top: 50%;
            transform: scale(1.2);
            animation-duration: 45s;
            animation-delay: -15s;
        }

        .cloud-wrapper.cloud-4 {
            top: 65%;
            transform: scale(0.6);
            animation-duration: 30s;
            animation-delay: -10s;
        }


        /* The main animation for moving clouds left-to-right */
        @keyframes moveClouds {
            0% {
                transform: translateX(-250px); /* Start off-screen left */
            }
            100% {
                transform: translateX(100vw); /* End off-screen right */
            }
        }


        /* --- Player UI --- */
        
        .player-container {
            display: flex;
            flex-direction: column;
            width: 90%;
            max-width: 700px;
            height: 70vh;
            max-height: 600px;
            
            /* This is the "frosted glass" effect */
            background: rgba(255, 255, 255, 0.35);
            backdrop-filter: blur(15px) saturate(180%);
            -webkit-backdrop-filter: blur(15px) saturate(180%);
            
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.1);
            
            /* Center the player - Will be set by JS now */
            position: absolute;
            /* Cursors will be managed by JS */
        }

        /* The title bar of the player */
        .title-bar {
            padding: 12px 20px;
            font-weight: 600;
            font-size: 1.1rem;
            color: #fff; /* Changed from #113 */
            border-bottom: 1px solid rgba(255, 255, 255, 0.4);
            cursor: move; /* Indicates this is draggable */
            user-select: none; /* Prevents text selection while dragging */
            -webkit-user-select: none; /* Safari */
        }

        .content {
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            flex-grow: 1; /* Makes content fill the space */
            overflow: hidden; /* Prevents internal scrolling */
        }

        /* The scrollable file list */
        .file-browser {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            padding: 10px;
            /* This flex-grow is key for the layout */
            flex-grow: 1; 
            overflow-y: auto; /* Adds the scrollbar! */
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        #file-list {
            list-style-type: none;
            display: grid; /* Use CSS Grid for the icon layout */
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); /* Auto-responsive columns */
            gap: 15px; /* Space between icons */
        }

        #file-list li {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.85rem;
            font-weight: 500;
            text-align: center;
            color: #fff; /* Changed from #111 */
            background: rgba(255, 255, 255, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.6);
            height: 120px; /* Fixed height for square look */
        }
        
        #file-list li:hover {
            background: rgba(255, 255, 255, 0.7);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        /* The icon part */
        #file-list li .file-icon {
            font-size: 3rem; /* Large icon */
            color: #fff; /* Changed from #0078D4 */
            margin-bottom: 8px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
            transition: color 0.2s ease;
        }

        /* Make icon white on active */
        #file-list li.active .file-icon {
            color: #ffffff;
        }

        /* The file name text */
        #file-list li .file-name {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            width: 100%; /* Ensure text ellipsis works */
            color: #fff; /* Changed from #111 */
        }

        /* This class is added by JavaScript to the playing track */
        #file-list li.active {
            background: rgba(0, 110, 200, 0.8);
            color: #fff;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(0, 110, 200, 0.4);
            border-color: rgba(0, 110, 200, 0.9);
        }
        
        #file-list li.active .file-name {
             color: #fff;
        }

        .player {
            flex-shrink: 0; /* Prevents this section from shrinking */
        }

        #now-playing {
            display: block;
            font-size: 1.1rem;
            font-weight: 600;
            color: #fff; /* Changed from #000 */
            margin-bottom: 12px;
            /* Fade text if too long */
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* The audio player itself */
        #audio-player {
            width: 100%;
        }

        /* Custom scrollbar to match the look */
        ::-webkit-scrollbar {
            width: 10px;
        }
        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.6);
            border-radius: 10px;
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.9);
        }
    </style>
</head>
<body>

    <!-- Animated Cloud Background --><div id="cloud-container">
        <!-- These wrappers move left-to-right --><div class="cloud-wrapper cloud-1">
            <div class="cloud"></div> <!-- This inner cloud pulses --></div>
        <div class="cloud-wrapper cloud-2">
            <div class="cloud"></div>
        </div>
        <div class="cloud-wrapper cloud-3">
            <div class="cloud"></div>
        </div>
        <div class="cloud-wrapper cloud-4">
            <div class="cloud"></div>
        </div>
    </div>

    <!-- The "Frosted Glass" Player --><div class="player-container">
        <div class="title-bar">
            ðŸŽµ Ilan Reiss Music Player
        </div>
        
        <div class="content">
            <div class="player">
                <span id="now-playing">Select a track to play</span>
                
                <!-- This is the ACTUAL audio player. 
                     'controls' adds the play/pause/volume. 
                     'crossorigin' is needed for the audio analysis to work. --><audio id="audio-player" controls crossorigin="anonymous"></audio>
            </div>
            
            <div class="file-browser">
                <!-- Your JavaScript will automatically fill this list --><ul id="file-list">
                    <!-- The list of files will appear here --></ul>
            </div>
        </div>
    </div>


    <!-- All JavaScript is now inside the HTML file --><script>
        // This function runs once the entire HTML page has loaded
        document.addEventListener('DOMContentLoaded', () => {

            // THIS IS YOUR LIST OF AUDIO FILES
            // I have copied all the names you provided.
            // This list MUST match the files you put in the 'audio' folder.
            const audioFiles = [
                "2 part shit.mp3", "42 cent.mp3", "67.mp3", "808 beat sample.mp3",
                "a break.mp3", "all me.mp3", "another one.mp3", "asher organ.mp3",
                "ass with potench.mp3", "bad one.mp3", "been a minu.mp3", "beeps.mp3",
                "before my set.mp3", "before you go.mp3", "black airforces.mp3",
                "bubs final.mp3", "bubs.mp3", "buds.mp3", "bullshittin.mp3",
                "candy shack.mp3", "chicos.mp3", "chilled.mp3", "com 303 sh.mp3",
                "corp. rework.mp3", "corp..mp3", "cya.mp3", "cypher chopped.mp3",
                "danklin.mp3", "day ones.mp3", "day today .mp3", "delete this track.mp3",
                "dub w.mp3", "easter.mp3", "ff.mp3", "flip.mp3", "fly guy.mp3",
                "for it.mp3", "for the car.mp3", "fridays.mp3", "fuckin idk.mp3",
                "funky.mp3", "gallery lazy break.mp3", "gallery.mp3", "giving in.mp3",
                "go 2.mp3", "goin crazy wit 10 racks.mp3", "goin crazy with 10 racks.mp3",
                "golf soundscape.mp3", "gover.mp3", "grizzlies ART.mp3", "grizzlies.mp3",
                "half life beat.mp3", "hammer down.mp3", "have it.mp3", "have to save.mp3",
                "hit the cart.mp3", "House on plane.mp3", "huh.mp3", "hyper fix.mp3",
                "i wanna.mp3", "insanity.mp3", "is ass.mp3", "jungled.mp3", "kenny.mp3",
                "kirked.mp3", "last of day.mp3", "lastly.mp3", "late.mp3", "lib beat.mp3",
                "locked.mp3", "lost it unfinished.mp3", "lyra demo.mp3", "ma.mp3",
                "making progress thru.mp3", "making progress.mp3", "mini 808.mp3",
                "MPC iPhone beat.mp3", "my amigo.mp3", "my sound scape.mp3",
                "new jersey club.mp3", "new setup.mp3", "niko again .mp3",
                "niko again unfinished.mp3", "niko is talking.mp3", "not done beat.mp3",
                "not thru.mp3", "not trash.mp3", "null.mp3", "number 3 shit.mp3",
                "On plane shiz.mp3", "postd.mp3", "practice.mp3", "quiky.mp3",
                "rabbits.mp3", "read up.mp3", "recipe.mp3", "redo.mp3", "reggae.mp3",
                "reggetons.mp3", "Reiss_Soundscape_edit.mp3", "Reiss_soundscape_raw.mp3",
                "rick poppa.mp3", "rythm.mp3", "same goal.mp3", "saturday morning.mp3",
                "saturn.mp3", "save rq.mp3", "saved it.mp3", "serup.mp3",
                "shit is trash.mp3", "shortest beat.mp3", "show class.mp3",
                "show trash.mp3", "slash slowed.mp3", "slash.mp3", "slow jam 2.mp3",
                "slow ride.mp3", "snippes.mp3", "soundbath 2.mp3", "soundbath.mp3",
                "SP iPhone sample.mp3", "spit it out.mp3", "standing in the rain.mp3",
                "starterd.mp3", "sue nami.mp3", "surfin.mp3", "swang.mp3",
                "swing song w eli.mp3", "synth demo.mp3", "take 2.mp3", "techno.mp3",
                "that way.mp3", "the monitor.mp3", "the worst beat ever.mp3",
                "this again.mp3", "threw together.mp3", "throw it up.mp3",
                "thursday.mp3", "trios.mp3", "trump-pets.mp3", "un house.mp3",
                "w issy.mp3", "watch it go.mp3", "week from today.mp3",
                "what am i doing.mp3", "what is this.mp3", "z style.mp3"
            ];

            // Get references to the HTML elements
            const fileListElement = document.getElementById('file-list');
            const audioPlayer = document.getElementById('audio-player');
            const nowPlayingElement = document.getElementById('now-playing');
            // Get all the inner cloud elements
            const clouds = document.querySelectorAll('.cloud');
            
            // --- Get elements for draggable window ---
            const playerContainer = document.querySelector('.player-container');
            const titleBar = document.querySelector('.title-bar');

            // --- 0. Set Initial Window Position ---
            // Center the window on load
            playerContainer.style.left = (window.innerWidth - playerContainer.offsetWidth) / 2 + 'px';
            playerContainer.style.top = (window.innerHeight - playerContainer.offsetHeight) / 2 + 'px';

            // --- 1. Populate the File List ---
            // This part runs right away to build your track list
            audioFiles.forEach(file => {
                const li = document.createElement('li');
                
                // Add the icon
                const icon = document.createElement('i');
                icon.classList.add('fas', 'fa-music', 'file-icon'); // Font Awesome music icon
                li.appendChild(icon);

                // Add the filename
                const fileNameSpan = document.createElement('span');
                fileNameSpan.classList.add('file-name');
                fileNameSpan.textContent = file.replace('.mp3', ''); // Clean name
                li.appendChild(fileNameSpan);

                li.dataset.filename = file; // Full name for playback
                fileListElement.appendChild(li);
            });

            // --- 2. Set up Audio Visualization ---
            // We need variables to hold the audio analysis tools
            let audioContext;
            let analyser;
            let source;
            let dataArray;
            let bufferLength;

            function setupAudioContext() {
                // Create a new AudioContext
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                // Create an Analyser node to "read" the audio data
                analyser = audioContext.createAnalyser();
                // Set how much data to collect
                analyser.fftSize = 256;
                // Get the audio from the <audio> element
                source = audioContext.createMediaElementSource(audioPlayer);
                
                // Connect the nodes together:
                // Audio Player -> Analyser -> Computer Speakers
                source.connect(analyser);
                analyser.connect(audioContext.destination);

                // Create an array to store the audio data
                bufferLength = analyser.frequencyBinCount;
                dataArray = new Uint8Array(bufferLength);
                
                // Start the animation loop
                animateClouds();
            }

            // --- 3. Create the Animation Loop ---
            // This function runs ~60 times per second
            function animateClouds() {
                // Loop this function
                requestAnimationFrame(animateClouds);

                // Only run visualization if audio is playing and context is active
                if (audioContext && audioPlayer.paused === false) { 
                    // Get the audio frequency data *right now*
                    analyser.getByteFrequencyData(dataArray);

                    // Calculate the average volume (bass)
                    let sum = 0;
                    // We only check the first 1/3 of frequencies (bass/low-mids)
                    for (let i = 0; i < bufferLength / 3; i++) {
                        sum += dataArray[i];
                    }
                    let average = sum / (bufferLength / 3);

                    // --- Control the Clouds ---
                    // 'average' will be 0 (silent) to ~150 (loud)
                    // We'll map this to a scale and shadow "intensity"
                    
                    // 1. Map average to an intensity (0 to ~2.0)
                    const intensity = (average / 75); // Tweak '75' to make it more/less sensitive
                    
                    // 2. Map intensity to a scale (e.g., 1.0 to 1.3)
                    const scale = 1 + (intensity * 0.15);
                    
                    // 3. Map intensity to a shadow spread (e.g., 15px to 45px)
                    const spread = 15 + (intensity * 15);
                    // 4. Map intensity to a shadow blur (e.g., 30px to 60px)
                    const blur = 30 + (intensity * 15);

                    // Apply these new styles to ALL clouds
                    clouds.forEach(cloud => {
                        cloud.style.transform = `scale(${Math.min(scale, 1.5)})`; // Cap scale at 1.5
                        cloud.style.boxShadow = `0 0 ${blur}px ${spread}px rgba(255, 255, 255, 0.8)`;
                    });
                } else {
                    // When paused, return clouds to default state
                    clouds.forEach(cloud => {
                        cloud.style.transform = `scale(1)`; 
                        cloud.style.boxShadow = `0 0 30px 15px rgba(255, 255, 255, 0.8)`;
                    });
                }
            }

            // --- 4. Handle Clicks on the File List ---
            fileListElement.addEventListener('click', (event) => {
                // Find the closest list item (<li>) to what was clicked
                const clickedLi = event.target.closest('li');

                if (clickedLi) { // Make sure a list item was actually clicked
                    const filename = clickedLi.dataset.filename;

                    // --- THIS IS THE MOST IMPORTANT PART ---
                    // Set the audio player's source to the file *inside the audio folder*
                    audioPlayer.src = 'audio/' + filename;
                    // -------------------------------------

                    // Set up the audio visualizer *on the first click*
                    // This is required by browsers to interact with audio
                    if (!audioContext) {
                        setupAudioContext();
                    } else if (audioContext.state === 'suspended') {
                        // Resume audio context if it was suspended (e.g., after user inactivity)
                        audioContext.resume();
                    }
                    
                    // Play the audio
                    audioPlayer.play();

                    // Update the "Now Playing" text
                    nowPlayingElement.textContent = clickedLi.querySelector('.file-name').textContent; // Use the text from the span

                    // Manage the 'active' class for styling
                    const currentActive = fileListElement.querySelector('.active');
                    if (currentActive) {
                        currentActive.classList.remove('active');
                    }
                    clickedLi.classList.add('active');
                }
            });

            // --- 5. Make Window Draggable ---
            let isDragging = false;
            let offsetX, offsetY;

            titleBar.addEventListener('mousedown', (e) => {
                isDragging = true;
                
                // Calculate offset from top-left corner of the window
                offsetX = e.clientX - playerContainer.offsetLeft;
                offsetY = e.clientY - playerContainer.offsetTop;

                // Change cursor style
                playerContainer.style.cursor = 'move';
                // Prevent text selection weirdness
                e.preventDefault();
            });

            document.addEventListener('mouseup', () => {
                isDragging = false;
                playerContainer.style.cursor = 'default';
            });

            document.addEventListener('mousemove', (e) => {
                if (!isDragging) return;

                let newX = e.clientX - offsetX;
                let newY = e.clientY - offsetY;

                // Constrain window to viewport
                const viewportWidth = window.innerWidth;
                const viewportHeight = window.innerHeight;
                const windowWidth = playerContainer.offsetWidth;
                const windowHeight = playerContainer.offsetHeight;

                if (newX < 0) newX = 0; // Left edge
                if (newY < 0) newY = 0; // Top edge
                if (newX + windowWidth > viewportWidth) newX = viewportWidth - windowWidth; // Right edge
                if (newY + windowHeight > viewportHeight) newY = viewportHeight - windowHeight; // Bottom edge

                playerContainer.style.left = newX + 'px';
                playerContainer.style.top = newY + 'px';
            });
        });
    </script>
</body>
</html>


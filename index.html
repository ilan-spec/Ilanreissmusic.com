<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ilan Reiss Music Player</title>
    
    <!-- Font Awesome for the music icon --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <!-- All CSS is now inside the HTML file --><style>
        /* Import a clean font, 'VT323' for a retro feel or 'Inter' for clean */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', system-ui, sans-serif;
            color: #000;
            /* Classic Windows teal background */
            background: #008080;
            overflow: hidden; /* Prevents scrollbars */
            height: 100vh;
            user-select: none; /* Prevent selection during drag/resize */
            -webkit-user-select: none;
        }

        /* --- Reusable Window Style --- */
        .window {
            display: flex;
            flex-direction: column;
            
            /* Classic Windows grey */
            background: #c0c0c0;
            
            /* Classic 3D border */
            border-top: 2px solid #fff;
            border-left: 2px solid #fff;
            border-right: 2px solid #404040;
            border-bottom: 2px solid #404040;
            box-shadow: 1px 1px 0 1px #000;
            
            position: absolute;
            min-width: 250px; /* Minimum size */
            min-height: 150px; /* Minimum size */
        }
        
        .player-container {
            width: 90%;
            max-width: 600px;
            height: 70vh;
            max-height: 550px;
        }

        /* The title bar of the player */
        .title-bar {
            padding: 5px 8px;
            font-weight: 700;
            font-size: 1rem;
            color: #fff; 
            /* Classic Windows active title bar */
            background: linear-gradient(to right, #000080, #1084d0);
            cursor: move; /* Indicates this is draggable */
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .title-bar-text {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        /* Close button for windows */
        .close-button {
            width: 18px;
            height: 18px;
            background: #c0c0c0;
            border-top: 1px solid #fff;
            border-left: 1px solid #fff;
            border-right: 1px solid #404040;
            border-bottom: 1px solid #404040;
            font-family: "Arial Black", sans-serif;
            font-size: 12px;
            font-weight: 900;
            color: #000;
            text-align: center;
            line-height: 16px;
            cursor: pointer;
            margin-left: 5px;
            flex-shrink: 0;
        }
        .close-button:active {
            border-top: 1px solid #404040;
            border-left: 1px solid #404040;
            border-right: 1px solid #fff;
            border-bottom: 1px solid #fff;
        }

        .content {
            padding: 10px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            flex-grow: 1; /* Makes content fill the space */
            overflow: hidden; /* Prevents internal scrolling */
            border-top: 1px solid #808080;
        }
        
        .player .content {
             overflow-y: hidden;
        }
        
        .content-inner {
            display: flex;
            flex-direction: column;
            gap: 10px;
            flex-grow: 1;
            overflow: hidden;
        }

        /* --- Search Bar Style --- */
        #search-bar {
            width: 100%;
            padding: 8px 10px;
            /* Classic inset border */
            border: 2px inset #808080;
            border-top-color: #404040;
            border-left-color: #404040;
            border-right-color: #fff;
            border-bottom-color: #fff;
            background: #fff;
            color: #000;
            font-size: 1rem;
            font-weight: 500;
            outline: none;
            flex-shrink: 0;
        }

        #search-bar::placeholder {
            color: #808080;
        }

        /* The scrollable file list */
        .file-browser {
            background: #fff;
            /* Classic inset border */
            border: 2px inset #808080;
            border-top-color: #404040;
            border-left-color: #404040;
            border-right-color: #fff;
            border-bottom-color: #fff;
            padding: 10px;
            flex-grow: 1; 
            overflow-y: auto; /* Adds the scrollbar! */
        }

        #file-list {
            list-style-type: none;
            display: grid; /* Use CSS Grid for the icon layout */
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); /* Auto-responsive columns */
            gap: 15px; /* Space between icons */
        }

        #file-list li {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 10px 5px;
            border-radius: 0;
            cursor: pointer;
            transition: none; /* Remove transitions */
            font-size: 0.85rem;
            font-weight: 500;
            text-align: center;
            color: #000; /* Text color black */
            background: transparent;
            border: 1px solid transparent; /* For focus */
            height: 100px; /* Fixed height for square look */
        }
        
        #file-list li:hover {
            /* No hover effect, handled by active */
            background: transparent;
        }

        /* The icon part */
        #file-list li .file-icon {
            font-size: 2.5rem; /* Large icon */
            color: #000080; /* Dark Blue */
            margin-bottom: 8px;
            text-shadow: none;
        }

        /* Make icon white on active */
        #file-list li.active .file-icon {
            color: #ffffff;
        }

        /* The file name text */
        #file-list li .file-name {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            width: 100%; /* Ensure text ellipsis works */
            color: #000; /* Black text */
            padding: 2px 4px; /* Give text a background on active */
        }

        /* This class is added by JavaScript to the playing track */
        #file-list li.active {
            background: #000080; /* Dark blue background */
            color: #fff; /* White text */
        }
        
        #file-list li.active .file-name {
             color: #fff;
        }

        .player-controls {
            flex-shrink: 0; /* Prevents this section from shrinking */
        }

        #now-playing {
            display: block;
            font-size: 1rem;
            font-weight: 600;
            color: #000; /* Black text */
            margin-bottom: 10px;
            padding: 5px;
            /* Fade text if too long */
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* The audio player itself */
        #audio-player {
            width: 100%;
        }

        /* Custom scrollbar to match the look (simple) */
        ::-webkit-scrollbar {
            width: 16px;
            background: #c0c0c0;
        }
        ::-webkit-scrollbar-track {
            background: #c0c0c0;
        }
        ::-webkit-scrollbar-thumb {
            background: #c0c0c0;
            border-top: 1px solid #fff;
            border-left: 1px solid #fff;
            border-right: 1px solid #404040;
            border-bottom: 1px solid #404040;
        }
        
        /* --- New Resize Handle --- */
        .resize-handle {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 16px;
            height: 16px;
            /* Simple diagonal line icon */
            background: repeating-linear-gradient(
                -45deg,
                #c0c0c0,
                #c0c0c0 2px,
                #404040 2px,
                #404040 4px,
                #fff 4px,
                #fff 6px
            );
            cursor: nwse-resize;
            z-index: 100;
        }
        
        /* --- New Visualizer Window --- */
        #visualizer-window {
            width: 350px;
            height: 200px;
            top: 20px;
            left: 20px;
            display: none; /* Hidden by default */
        }
        
        #visualizer-canvas {
            width: 100%;
            height: 100%;
            background: #000;
            display: block;
        }
        
        /* --- New Info Window --- */
        #info-window {
            width: 300px;
            height: 250px;
            top: 150px;
            left: 100px;
            display: none; /* Hidden by default */
        }
        
        #info-window .content {
            padding: 15px;
            font-size: 0.9rem;
        }
        
        #info-button {
            width: 25px;
            height: 25px;
            background: #c0c0c0;
            border-top: 2px solid #fff;
            border-left: 2px solid #fff;
            border-right: 2px solid #404040;
            border-bottom: 2px solid #404040;
            font-family: "Arial Black", sans-serif;
            font-size: 14px;
            font-weight: 900;
            color: #000080;
            text-align: center;
            line-height: 20px;
            cursor: pointer;
            margin-top: 5px;
            align-self: flex-start;
        }
        #info-button:active {
            border-top: 2px solid #404040;
            border-left: 2px solid #404040;
            border-right: 2px solid #fff;
            border-bottom: 2px solid #fff;
        }

        /* --- New Digital Clock --- */
        #digital-clock {
            position: fixed;
            bottom: 0;
            right: 0;
            background: #c0c0c0;
            border-top: 2px solid #fff;
            border-left: 2px solid #fff;
            border-right: 2px solid #404040;
            border-bottom: 2px solid #404040;
            padding: 5px 10px;
            font-size: 1rem;
            font-weight: 600;
            z-index: 1000;
            border-bottom: none; /* Sits on bottom edge */
            border-right: none; /* Sits on right edge */
        }
    </style>
</head>
<body>

    <!-- The "Old Computer" Player --><div class="player-container window">
        <div class="title-bar">
            <span class="title-bar-text">üéµ Ilan Reiss Music Player</span>
        </div>
        
        <div class="content">
            <div class="player-controls">
                <span id="now-playing">Select a track to play</span>
                
                <!-- Added 'crossorigin' back for visualizer --><audio id="audio-player" controls crossorigin="anonymous"></audio>
            </div>
            
            <div class="content-inner">
                <input type="text" id="search-bar" placeholder="Search tracks...">

                <div class="file-browser">
                    <ul id="file-list">
                        <!-- The list of files will appear here --></ul>
                </div>
                 <button id="info-button">i</button>
            </div>
        </div>
        <div class="resize-handle"></div>
    </div>
    
    <!-- New Visualizer Window -->
    <div id="visualizer-window" class="window">
         <div class="title-bar">
            <span class="title-bar-text">üîä Audio Visualizer</span>
            <span class="close-button" data-target="visualizer-window">X</span>
        </div>
        <div class="content" style="padding: 0; border: 2px inset #808080; border-top-color: #404040; border-left-color: #404040; border-right-color: #fff; border-bottom-color: #fff;">
            <canvas id="visualizer-canvas"></canvas>
        </div>
        <div class="resize-handle"></div>
    </div>
    
    <!-- New Info Window -->
    <div id="info-window" class="window">
         <div class="title-bar">
            <span class="title-bar-text">‚ÑπÔ∏è Information</span>
            <span class="close-button" data-target="info-window">X</span>
        </div>
        <div class="content">
            <p><strong>Ilan Reiss Music Player</strong></p>
            <p>Version 1.0 (Retro)</p>
            <br>
            <p>This music player streams files directly from the 'Audio' folder of the GitHub repository.</p>
            <br>
            <p><em>(You can edit this text in the ilanreissmusic.com.html file)</em></p>
        </div>
        <div class="resize-handle"></div>
    </div>
    
    <!-- New Digital Clock -->
    <div id="digital-clock">9:31 PM</div>


    <!-- All JavaScript is now inside the HTML file --><script>
        // This function runs once the entire HTML page has loaded
        document.addEventListener('DOMContentLoaded', () => {

            // --- AUDIO FILE LIST ---
            const audioFiles = [
                "2 part shit.mp3", "42 cent.mp3", "67.mp3", "808 beat sample.mp3",
                "a break.mp3", "all me.mp3", "another one.mp3", "asher organ.mp3",
                "ass with potench.mp3", "bad one.mp3", "been a minu.mp3", "beeps.mp3",
                "before my set.mp3", "before you go.mp3", "black airforces.mp3",
                "bubs final.mp3", "bubs.mp3", "buds.mp3", "bullshittin.mp3",
                "candy shack.mp3", "chicos.mp3", "chilled.mp3", "com 303 sh.mp3",
                "corp. rework.mp3", "corp..mp3", "cya.mp3", "cypher chopped.mp3",
                "danklin.mp3", "day ones.mp3", "day today .mp3", "delete this track.mp3",
                "dub w.mp3", "easter.mp3", "ff.mp3", "flip.mp3", "fly guy.mp3",
                "for it.mp3", "for the car.mp3", "fridays.mp3", "fuckin idk.mp3",
                "funky.mp3", "gallery lazy break.mp3", "gallery.mp3", "giving in.mp3",
                "go 2.mp3", "goin crazy wit 10 racks.mp3", "goin crazy with 10 racks.mp3",
                "golf soundscape.mp3", "gover.mp3", "grizzlies ART.mp3", "grizzlies.mp3",
                "half life beat.mp3", "hammer down.mp3", "have it.mp3", "have to save.mp3",
                "hit the cart.mp3", "House on plane.mp3", "huh.mp3", "hyper fix.mp3",
                "i wanna.mp3", "insanity.mp3", "is ass.mp3", "jungled.mp3", "kenny.mp3",
                "kirked.mp3", "last of day.mp3", "lastly.mp3", "late.mp3", "lib beat.mp3",
                "locked.mp3", "lost it unfinished.mp3", "lyra demo.mp3", "ma.mp3",
                "making progress thru.mp3", "making progress.mp3", "mini 808.mp3",
                "MPC iPhone beat.mp3", "my amigo.mp3", "my sound scape.mp3",
                "new jersey club.mp3", "new setup.mp3", "niko again .mp3",
                "niko again unfinished.mp3", "niko is talking.mp3", "not done beat.mp3",
                "not thru.mp3", "not trash.mp3", "null.mp3", "number 3 shit.mp3",
                "On plane shiz.mp3", "postd.mp3", "practice.mp3", "quiky.mp3",
                "rabbits.mp3", "read up.mp3", "recipe.mp3", "redo.mp3", "reggae.mp3",
                "reggetons.mp3", "Reiss_Soundscape_edit.mp3", "Reiss_soundscape_raw.mp3",
                "rick poppa.mp3", "rythm.mp3", "same goal.mp3", "saturday morning.mp3",
                "saturn.mp3", "save rq.mp3", "saved it.mp3", "serup.mp3",
                "shit is trash.mp3", "shortest beat.mp3", "show class.mp3",
                "show trash.mp3", "slash slowed.mp3", "slash.mp3", "slow jam 2.mp3",
                "slow ride.mp3", "snippes.mp3", "soundbath 2.mp3", "soundbath.mp3",
                "SP iPhone sample.mp3", "spit it out.mp3", "standing in the rain.mp3",
                "starterd.mp3", "sue nami.mp3", "surfin.mp3", "swang.mp3",
                "swing song w eli.mp3", "synth demo.mp3", "take 2.mp3", "techno.mp3",
                "that way.mp3", "the monitor.mp3", "the worst beat ever.mp3",
                "this again.mp3", "threw together.mp3", "throw it up.mp3",
                "thursday.mp3", "trios.mp3", "trump-pets.mp3", "un house.mp3",
                "w issy.mp3", "watch it go.mp3", "week from today.mp3",
                "what am i doing.mp3", "what is this.mp3", "z style.mp3"
            ];

            // --- ELEMENT REFERENCES ---
            const audioPlayer = document.getElementById('audio-player');
            const fileListElement = document.getElementById('file-list');
            const nowPlayingElement = document.getElementById('now-playing');
            const searchBar = document.getElementById('search-bar');
            
            const playerContainer = document.querySelector('.player-container');
            const visualizerWindow = document.getElementById('visualizer-window');
            const infoWindow = document.getElementById('info-window');
            const infoButton = document.getElementById('info-button');
            const digitalClock = document.getElementById('digital-clock');
            
            const canvas = document.getElementById('visualizer-canvas');
            const ctx = canvas.getContext('2d');

            // --- AUDIO VISUALIZER SETUP ---
            let audioContext, analyser, source, dataArray, bufferLength;
            let visualizerActive = false;

            function setupVisualizer() {
                if (audioContext) return; // Already set up
                
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                analyser = audioContext.createAnalyser();
                analyser.fftSize = 256; // Controls bar count (fftSize / 2)
                
                source = audioContext.createMediaElementSource(audioPlayer);
                source.connect(analyser);
                analyser.connect(audioContext.destination);
                
                bufferLength = analyser.frequencyBinCount;
                dataArray = new Uint8Array(bufferLength);
                
                visualizerWindow.style.display = 'flex'; // Show visualizer
                visualizerActive = true;
                drawVisualizer();
            }

            function drawVisualizer() {
                if (!visualizerActive) return;
                
                requestAnimationFrame(drawVisualizer);
                
                analyser.getByteFrequencyData(dataArray);
                
                // Set canvas size based on its DOM element size
                canvas.width = canvas.clientWidth;
                canvas.height = canvas.clientHeight;
                
                ctx.fillStyle = '#000'; // Black background
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                const barWidth = (canvas.width / bufferLength) * 1.5;
                let barHeight;
                let x = 0;
                
                const gradient = ctx.createLinearGradient(0, canvas.height, 0, 0);
                gradient.addColorStop(0, '#00ff00'); // Green
                gradient.addColorStop(0.5, '#ffff00'); // Yellow
                gradient.addColorStop(1, '#ff0000'); // Red
                
                ctx.fillStyle = gradient;

                for(let i = 0; i < bufferLength; i++) {
                    barHeight = (dataArray[i] / 255) * canvas.height;
                    
                    ctx.fillRect(x, canvas.height - barHeight, barWidth, barHeight);
                    
                    x += barWidth + 2; // Add 2px spacing
                }
            }

            // --- WINDOW MANAGEMENT FUNCTIONS ---

            function makeWindowDraggable(windowEl) {
                const titleBar = windowEl.querySelector('.title-bar');
                let isDragging = false;
                let offsetX, offsetY;
                
                titleBar.addEventListener('mousedown', (e) => {
                    // Don't drag if clicking the close button
                    if (e.target.classList.contains('close-button')) return;
                    
                    isDragging = true;
                    offsetX = e.clientX - windowEl.offsetLeft;
                    offsetY = e.clientY - windowEl.offsetTop;
                    document.body.style.cursor = 'move';
                    e.preventDefault();
                });

                document.addEventListener('mouseup', () => {
                    isDragging = false;
                    document.body.style.cursor = 'default';
                });

                document.addEventListener('mousemove', (e) => {
                    if (!isDragging) return;

                    let newX = e.clientX - offsetX;
                    let newY = e.clientY - offsetY;
                    
                    // Constrain to viewport
                    newX = Math.max(0, Math.min(newX, window.innerWidth - windowEl.offsetWidth));
                    newY = Math.max(0, Math.min(newY, window.innerHeight - windowEl.offsetHeight));

                    windowEl.style.left = newX + 'px';
                    windowEl.style.top = newY + 'px';
                });
            }

            function makeWindowResizable(windowEl) {
                const resizeHandle = windowEl.querySelector('.resize-handle');
                let isResizing = false;

                resizeHandle.addEventListener('mousedown', (e) => {
                    isResizing = true;
                    document.body.style.cursor = 'nwse-resize';
                    e.preventDefault();
                });

                document.addEventListener('mouseup', () => {
                    isResizing = false;
                    document.body.style.cursor = 'default';
                });

                document.addEventListener('mousemove', (e) => {
                    if (!isResizing) return;
                    
                    let newWidth = e.clientX - windowEl.offsetLeft;
                    let newHeight = e.clientY - windowEl.offsetTop;

                    // Enforce min/max size
                    newWidth = Math.max(windowEl.style.minWidth || 250, newWidth);
                    newHeight = Math.max(windowEl.style.minHeight || 150, newHeight);

                    windowEl.style.width = newWidth + 'px';
                    windowEl.style.height = newHeight + 'px';
                });
            }

            // --- INITIALIZE WINDOWS ---
            [playerContainer, visualizerWindow, infoWindow].forEach(makeWindowDraggable);
            [playerContainer, visualizerWindow, infoWindow].forEach(makeWindowResizable);

            // Center main player window on load
            playerContainer.style.left = (window.innerWidth - playerContainer.offsetWidth) / 2 + 'px';
            playerContainer.style.top = (window.innerHeight - playerContainer.offsetHeight) / 2 + 'px';
            
            // Position other windows
            visualizerWindow.style.left = '20px';
            visualizerWindow.style.top = '20px';
            infoWindow.style.left = (window.innerWidth - 300) / 2 + 'px';
            infoWindow.style.top = (window.innerHeight - 250) / 2 + 'px';


            // --- POPULATE FILE LIST ---
            audioFiles.forEach(file => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <i class="fas fa-music file-icon"></i>
                    <span class="file-name">${file.replace('.mp3', '')}</span>
                `;
                li.dataset.filename = file;
                fileListElement.appendChild(li);
            });

            // --- EVENT LISTENERS ---

            // File click
            fileListElement.addEventListener('click', (event) => {
                const clickedLi = event.target.closest('li');
                if (clickedLi) {
                    const filename = clickedLi.dataset.filename;
                    
                    // --- IMPORTANT: PATH FIXED ---
                    audioPlayer.src = 'Audio/' + filename;
                    
                    // Initialize visualizer on first play
                    if (!audioContext) {
                        setupVisualizer();
                    } else if (audioContext.state === 'suspended') {
                         audioContext.resume();
                    }
                    
                    audioPlayer.play();
                    nowPlayingElement.textContent = clickedLi.querySelector('.file-name').textContent;
                    
                    const currentActive = fileListElement.querySelector('.active');
                    if (currentActive) {
                        currentActive.classList.remove('active');
                    }
                    clickedLi.classList.add('active');
                    
                    // Show visualizer window
                    visualizerWindow.style.display = 'flex';
                    visualizerActive = true;
                    drawVisualizer(); // Start loop
                }
            });
            
            // Stop visualizer when paused
            audioPlayer.addEventListener('pause', () => {
                visualizerActive = false;
            });
            
            // Restart visualizer when played
             audioPlayer.addEventListener('play', () => {
                if (audioContext) { // Only if initialized
                    audioContext.resume();
                    visualizerActive = true;
                    drawVisualizer(); // Restart loop
                }
            });

            // Search bar
            searchBar.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase();
                fileListElement.querySelectorAll('li').forEach(fileLi => {
                    const fileName = fileLi.querySelector('.file-name').textContent.toLowerCase();
                    fileLi.style.display = fileName.includes(searchTerm) ? 'flex' : 'none';
                });
            });

            // Autoplay next
            audioPlayer.addEventListener('ended', () => {
                const currentActive = fileListElement.querySelector('.active');
                if (currentActive) {
                    let nextTrack = currentActive.nextElementSibling;
                    // Loop back to start if at the end
                    if (!nextTrack) {
                        nextTrack = fileListElement.firstElementChild;
                    }
                    if (nextTrack) {
                        nextTrack.click();
                    }
                }
            });
            
            // Info button
            infoButton.addEventListener('click', () => {
                infoWindow.style.display = 'flex';
            });
            
            // Close buttons
            document.querySelectorAll('.close-button').forEach(button => {
                button.addEventListener('click', (e) => {
                    const targetWindowId = e.target.dataset.target;
                    const windowToClose = document.getElementById(targetWindowId);
                    if (windowToClose) {
                        windowToClose.style.display = 'none';
                        if (targetWindowId === 'visualizer-window') {
                            visualizerActive = false; // Stop visualizer loop
                        }
                    }
                });
            });

            // --- DIGITAL CLOCK ---
            function updateClock() {
                const now = new Date();
                let hours = now.getHours();
                const minutes = now.getMinutes().toString().padStart(2, '0');
                const ampm = hours >= 12 ? 'PM' : 'AM';
                
                hours = hours % 12;
                hours = hours ? hours : 12; // 0 hour should be 12
                
                digitalClock.textContent = `${hours}:${minutes} ${ampm}`;
            }
            setInterval(updateClock, 1000);
            updateClock(); // Initial call
        });
    </script>
</body>
</html>

